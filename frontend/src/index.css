:root { --bg:#0b0e12; --panel:#141924; --text:#e9edf5; --muted:#a9b3c7; --accent:#2f6df6; --bubble:#1a2130; --me:#2257d8; }
:root[data-theme="light"] { --bg:#f5f7fb; --panel:#ffffff; --text:#0f1a2a; --muted:#5b6a82; --accent:#2151d8; --bubble:#f1f4fa; --me:#2f6df6; }

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { margin:0; background:var(--bg); color:var(--text); font-family: Vazirmatn, system-ui, sans-serif; }

.page { display:flex; flex-direction:column; height:100%; }
.topbar { display:flex; align-items:center; gap:12px; padding:12px 16px; border-bottom:1px solid #1e2533; background:var(--panel); }
.brand { font-weight:700; font-size:20px; }
.spacer { flex:1; }
.pill { border:1px solid #334; background:transparent; color:var(--text); border-radius:999px; padding:6px 12px; cursor:pointer; }

.chat-wrap { display:flex; flex-direction:column; height:100%; max-width:1000px; width:100%; margin:0 auto; }
.chat-list { flex:1; padding:16px; overflow:auto; }
.empty { text-align:center; opacity:.8; margin-top:48px; }
.empty .title { font-size:20px; margin-bottom:8px; }
.chips { display:flex; flex-wrap:wrap; gap:8px; justify-content:center; margin-top:8px; }
.chip { background:var(--bubble); color:var(--text); border:0; padding:6px 10px; border-radius:999px; cursor:pointer; }

.msg { display:flex; margin:8px 0; }
.msg.me { justify-content:flex-end; }
.msg.assistant { justify-content:flex-start; }
.msg.error .bubble { background:#3b1e1e; }

.bubble {
  max-width: min(720px, 92%);
  background: var(--bubble);
  border-radius: 14px;
  padding: 12px 14px 8px;
  position: relative;
  direction: rtl;
  text-align: right;
  line-height: 1.75;
}
.msg.me .bubble { background: var(--me); color:#fff; }

.content p { margin: 0 0 10px 0; }
.content h1,h2,h3 { margin:8px 0; }
.content ul { padding-right: 18px; margin: 8px 0; }
.content code { background: rgba(255,255,255,.08); padding:2px 6px; border-radius:6px; }

.msg-actions {
  display:flex; gap:6px;
  position:absolute; bottom:6px; left:8px;
  direction:ltr; /* جاش سمت چپ حباب */
}
.msg.me .msg-actions { left:auto; right:8px; direction:ltr; }

.icon-btn {
  background: transparent; border: 0; cursor: pointer;
  opacity: .75; padding: 4px; border-radius: 8px;
}
.icon-btn:hover { opacity: 1; background: rgba(255,255,255,.08); }

.dots { display:inline-flex; gap:6px; padding:2px 4px; }
.dots span {
  width:8px; height:8px; border-radius:999px; background:#9bb1ff; display:inline-block;
  animation: blink 1.2s infinite ease-in-out;
}
.dots span:nth-child(2){ animation-delay:.15s }
.dots span:nth-child(3){ animation-delay:.3s }
@keyframes blink { 0%,80%,100%{opacity:.2} 40%{opacity:1} }

.composer {
  display:flex; gap:8px; padding:12px; border-top:1px solid #1e2533; background:var(--panel);
}
.input {
  flex:1; direction: rtl; text-align: right; background: var(--bubble); border: 1px solid #2a3244;
  color: var(--text); padding:12px 12px; border-radius: 12px; outline:none;
}
.btn { background: var(--accent); color:#fff; border:0; padding:10px 16px; border-radius:12px; cursor:pointer; }
.btn:disabled { opacity:.6; cursor:not-allowed; }
.ghost { background: transparent; color: var(--muted); border:1px dashed #334; padding:10px 12px; border-radius:12px; cursor:pointer; }

.foot { text-align:center; padding:10px; font-size:12px; color:var(--muted); }
.foot a { color: var(--text); text-decoration: underline; }
